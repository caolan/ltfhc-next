$(function() {
	$("#field1").alpaca({
		"data": {},
		"options": {
			"renderform": "true",
			"fields": {
				"subforms": {
					"fields": {
						"bodilyinjury": {
							"dependencies": {
								"reasons": "bodilyinjury"
							}
						},
						"diseasediagnosis": {
							"dependencies": {
								"reasons": "diseasediagnosis"
							}
						},
						"immunization": {
							"dependencies": {
								"reasons": "immunization"
							}
						}
					}
				}
			}
		},
		"schema": {
			"title": "Patient Visit",
			"description": "Enter information about the patient's visit",
			"type": "object",
			"properties": {
				"village": {
					"title": "village",
					"type": "string"
				},
				"clinicid": {
					"title": "Clinic ID",
					"type": "string"
				},
				"userid": {
					"title": "Clinician",
					"type": "string"
				},
				"notes": {
					"title": "Notes",
					"type": "string"
				},
				"reasons": {
					"title": "Reasons for Visit",
					"type": "string",
					"$ref": "#/definitions/list"
				},
				"subforms": {
					"$ref": "#/definitions/subforms"
				}
			},
			"definitions": {
				"list": {
					"enum": ["bodilyinjury", "diseasediagnosis", "immunization"]
				},
				"subforms": {
					"type": "object",
					"title": "Sub forms",
					"properties": {
						"bodilyinjury": {
							"title": "Bodily Injury",
							"type": "string",
							"dependencies": "reasons"
						},
						"diseasediagnosis": {
							"title": "Disease Diagnosis",
							"type": "string",
							"dependencies": "reasons"
						},
						"immunization": {
							"title": "Imnunization",
							"type": "string",
							"dependencies": "reasons"
						}
					}
				}
			},
			"view": "VIEW_JQUERYUI_EDIT_LIST"
		}
	});
});
